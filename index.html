<!DOCTYPE html>
<html>
<head>
  <link type="text/css" rel="stylesheet" href="../node_modules/video.js/dist/video-js.min.css"/>
  <meta charset="UTF-8">
</head>
<body>
  <video
    id="vid1"
    class="video-js vjs-default-skin"
    controls
    autoplay
    width="640" height="264"
    data-setup='{ "techOrder": ["youtube"], "sources": [{ "type": "video/youtube", "src": "https://www.youtube.com/watch?v=j5-yKhDd64s"}] }'
  >
  </video>
  <!-- <script src="videojs-abloop.js"></script> -->
  <script src="../node_modules/video.js/dist/video.min.js"></script>
  <script src="../node_modules/videojs-youtube/dist/Youtube.min.js"></script>
  <script src="../node_modules/hamsterjs/hamster.js"></script>
  <script src="build/build.js"></script>
  <script src="https://cdn.rawgit.com/phhu/videojs-abloop/master/dist/videojs-abloop.min.js"></script>
  <script>
  //initialise the video with the plugin and initial settings
let speed = 0.75;
let deltaSpeed = 0.01;
let playbackRate;
let that;

let video = videojs("vid1",{
	plugins: {
		abLoopPlugin: {
			start:22    	//in seconds - defaults to 0
			,end:30    	//in seconds. Set to  false to loop to end of video. Defaults to false
			,enabled:false			//defaults to false
			,loopIfBeforeStart:false //allow video to play normally before the loop section? defaults to true
			,loopIfAfterEnd:true	// defaults to true
			,pauseAfterLooping: false     	//if true, after looping video will pause. Defaults to false
			,pauseBeforeLooping: false     	//if true, before looping video will pause. Defaults to false
			,createButtons: true		//defaults to true
		}
	}
}).ready(function(){
  that = this;
  that.playbackRate(speed);
  video.abLoopPlugin.setStart(23).setEnd(26).enable();
});

Hamster(window).wheel((event, delta, deltaX, deltaY) => {
  speed = speed + delta * deltaSpeed;
  that.playbackRate(speed);
  console.log('playbackRate : ' + speed);
});

video.play(23);

</script>
</body>
</html>
